import{_ as s,o as a,c as n,Q as l}from"./chunks/framework.c697fbd8.js";const F=JSON.parse('{"title":"nginx 常用命令","description":"","frontmatter":{},"headers":[],"relativePath":"memo/web/nginx.md","filePath":"memo/web/nginx.md","lastUpdated":1693813118000}'),p={name:"memo/web/nginx.md"},o=l(`<h1 id="nginx-常用命令" tabindex="-1">nginx 常用命令 <a class="header-anchor" href="#nginx-常用命令" aria-label="Permalink to &quot;nginx 常用命令&quot;">​</a></h1><h2 id="安装-nginx" tabindex="-1">安装 nginx <a class="header-anchor" href="#安装-nginx" aria-label="Permalink to &quot;安装 nginx&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">update</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">apt</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">install</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">update</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">apt</span><span style="color:#24292E;"> </span><span style="color:#032F62;">install</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><h2 id="编辑-nginx-配置文件" tabindex="-1">编辑 Nginx 配置文件 <a class="header-anchor" href="#编辑-nginx-配置文件" aria-label="Permalink to &quot;编辑 Nginx 配置文件&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 打开 Nginx 配置文件 Ctrl + X 进入命令模式</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nano</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/nginx/nginx.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 打开 Nginx 配置文件 Ctrl + X 进入命令模式</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nano</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/nginx/nginx.conf</span></span></code></pre></div><h2 id="启动服务" tabindex="-1">启动服务 <a class="header-anchor" href="#启动服务" aria-label="Permalink to &quot;启动服务&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">start</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">start</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><h2 id="重新加载配置" tabindex="-1">重新加载配置 <a class="header-anchor" href="#重新加载配置" aria-label="Permalink to &quot;重新加载配置&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">reload</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">reload</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><h2 id="停止服务" tabindex="-1">停止服务 <a class="header-anchor" href="#停止服务" aria-label="Permalink to &quot;停止服务&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">stop</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">stop</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><h2 id="查看服务状态" tabindex="-1">查看服务状态 <a class="header-anchor" href="#查看服务状态" aria-label="Permalink to &quot;查看服务状态&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">status</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">status</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><h2 id="重启服务" tabindex="-1">重启服务 <a class="header-anchor" href="#重启服务" aria-label="Permalink to &quot;重启服务&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">service</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">restart</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">service</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;"> </span><span style="color:#032F62;">restart</span></span></code></pre></div><h2 id="设置开机自启" tabindex="-1">设置开机自启 <a class="header-anchor" href="#设置开机自启" aria-label="Permalink to &quot;设置开机自启&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">systemctl</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">enable</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">systemctl</span><span style="color:#24292E;"> </span><span style="color:#032F62;">enable</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span></span></code></pre></div><h2 id="开启守护进程" tabindex="-1">开启守护进程 <a class="header-anchor" href="#开启守护进程" aria-label="Permalink to &quot;开启守护进程&quot;">​</a></h2><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#6A737D;"># 将 Nginx 启动为守护进程</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-g</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;daemon on;&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># 启动 Nginx 时将其作为守护进程</span></span>
<span class="line"><span style="color:#B392F0;">sudo</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">nginx</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-g</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;daemon on;&quot;</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">/etc/nginx/nginx.conf</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6A737D;"># 将 Nginx 启动为守护进程</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-g</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;daemon on;&quot;</span></span>
<span class="line"><span style="color:#6A737D;"># 启动 Nginx 时将其作为守护进程</span></span>
<span class="line"><span style="color:#6F42C1;">sudo</span><span style="color:#24292E;"> </span><span style="color:#032F62;">nginx</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-g</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;daemon on;&quot;</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">/etc/nginx/nginx.conf</span></span></code></pre></div><h2 id="配置-https" tabindex="-1">配置 HTTPS <a class="header-anchor" href="#配置-https" aria-label="Permalink to &quot;配置 HTTPS&quot;">​</a></h2><div class="language-nginx vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">nginx</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#F97583;">server</span><span style="color:#E1E4E8;"> {</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> listen </span><span style="color:#E1E4E8;">443 ssl;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> server_name </span><span style="color:#E1E4E8;">yourdomain.com www.yourdomain.com;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_certificate </span><span style="color:#E1E4E8;">/path/to/your/certificate.pem;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_certificate_key </span><span style="color:#E1E4E8;">/path/to/your/privatekey.pem;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 关闭不安全的 SSL 协议</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_protocols </span><span style="color:#E1E4E8;">TLSv1.2 TLSv1.3;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_prefer_server_ciphers </span><span style="color:#E1E4E8;">on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#6A737D;"># 启用更安全的密码套件</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_ciphers </span><span style="color:#E1E4E8;">ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_session_timeout </span><span style="color:#E1E4E8;">1d;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_session_cache </span><span style="color:#E1E4E8;">shared:SSL:50m;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> ssl_session_tickets </span><span style="color:#E1E4E8;">off;</span></span>
<span class="line"><span style="color:#E1E4E8;"> </span><span style="color:#F97583;"> add_header </span><span style="color:#E1E4E8;">Strict-Transport-Security </span><span style="color:#9ECBFF;">&quot;max-age=15768000; includeSubDomains; preload;&quot;</span><span style="color:#E1E4E8;">;</span></span>
<span class="line"><span style="color:#E1E4E8;">  ...</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#D73A49;">server</span><span style="color:#24292E;"> {</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> listen </span><span style="color:#24292E;">443 ssl;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> server_name </span><span style="color:#24292E;">yourdomain.com www.yourdomain.com;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> ssl_certificate </span><span style="color:#24292E;">/path/to/your/certificate.pem;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> ssl_certificate_key </span><span style="color:#24292E;">/path/to/your/privatekey.pem;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 关闭不安全的 SSL 协议</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> ssl_protocols </span><span style="color:#24292E;">TLSv1.2 TLSv1.3;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> ssl_prefer_server_ciphers </span><span style="color:#24292E;">on;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#6A737D;"># 启用更安全的密码套件</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> ssl_ciphers </span><span style="color:#24292E;">ECDHE-ECDSA-AES256-GCM-SHA384:ECDHE-RSA-AES256-GCM-SHA384:ECDHE-ECDSA-CHACHA20-POLY1305:ECDHE-RSA-CHACHA20-POLY1305:ECDHE-ECDSA-AES128-GCM-SHA256:ECDHE-RSA-AES128-GCM-SHA256:ECDHE-ECDSA-AES256-SHA384:ECDHE-RSA-AES256-SHA384:ECDHE-ECDSA-AES128-SHA256:ECDHE-RSA-AES128-SHA256;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> ssl_session_timeout </span><span style="color:#24292E;">1d;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> ssl_session_cache </span><span style="color:#24292E;">shared:SSL:50m;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> ssl_session_tickets </span><span style="color:#24292E;">off;</span></span>
<span class="line"><span style="color:#24292E;"> </span><span style="color:#D73A49;"> add_header </span><span style="color:#24292E;">Strict-Transport-Security </span><span style="color:#032F62;">&quot;max-age=15768000; includeSubDomains; preload;&quot;</span><span style="color:#24292E;">;</span></span>
<span class="line"><span style="color:#24292E;">  ...</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div>`,21),e=[o];function t(c,r,E,i,y,d){return a(),n("div",null,e)}const u=s(p,[["render",t]]);export{F as __pageData,u as default};
